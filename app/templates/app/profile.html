{% extends 'app/base.html' %}


{% block content %}
<div class="profile-wrapper">
  {% if messages %}
      {% for message in messages %}
        <div class="alert">{{ message }}</div>
      {% endfor %}
  {% endif %}

  <div class="profile-card">
    <h2>Profile Details</h2>
    <p><strong>Username:</strong> {{ user.username }}</p>
    <p><strong>Email:</strong> {{ user.email|default:"Not set" }}</p>
    <p><strong>Role:</strong> {{ user_profile.role|title }}</p>
    <p><strong>Permissions:</strong> {{ user_profile.permissions|default:"No specific permissions" }}</p>
  </div>

  <div class="profile-card">
    <h2>Edit Profile</h2>
    <form class="profile-form" method="post">
      {% csrf_token %}
      <label>Role:
        <select name="role" required>
          <option value="admin"  {% if user_profile.role == 'admin'  %}selected{% endif %}>Admin</option>
          <option value="staff"  {% if user_profile.role == 'staff'  %}selected{% endif %}>Staff</option>
          <option value="viewer" {% if user_profile.role == 'viewer' %}selected{% endif %}>Viewer</option>
        </select>
      </label>

      <label>Permissions (JSON):
        <textarea name="permissions">{{ user_profile.permissions|default:"{}" }}</textarea>
      </label>

      <button type="submit">Save Changes</button>
    </form>
  </div>

  <a class="back-link" href="{% url 'dashboard' %}">‚Üê Back to Dashboard</a>
</div>
{% endblock %}