{% extends 'app/base.html' %}
{% load custom_filters %}

{% block content %}

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      <p style="color: green;">{{ message }}</p>
    </div>
  {% endfor %}
{% endif %}

<div class="page-header">
  <h1>Inventory</h1>
  <a class="btn-add" href="{% url 'add_inventory' %}">Add Inventory</a>
</div>

<div class="page-header">
  <p>Total Current Stock: <strong style="color: #245c9c;">{{ total_current_stock }}</strong></p>
  <p>Total Inward Quantity: <strong style="color: #2e8652;">{{ total_inward_qty }}</strong></p>
  <p>Total CS Price: <strong style="color: #245c9c;">₹{{ total_price|floatformat:2|indian_comma }}</strong></p>
</div>

<table class="dv-table">
  <thead>
    <tr>
      <th>Product</th>
      <th>Inward&nbsp;Qty</th>
      <th>Current&nbsp;Stock</th>
      <th>Vendor</th>
      <th>Last&nbsp;Updated</th>
      <th>Total&nbsp;Price</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for item in inventory %}
    <tr>
      <td>{{ item.product.name|title }}</td>
      <td>{{ item.inward_qty }}</td>
      <td>{{ item.stock_quantity }}</td>
      <td>{{ item.vendor.name|default:"N/A"|title }}</td>
      <td>{{ item.last_updated|date:"F d, Y" }}</td>
      <td>₹{{ item.total_price|floatformat:2|indian_comma }}</td>
      <td class="actions">
        <a class="btn" href="{% url 'edit_inventory' item.pk %}">Edit</a>
        <a class="btn danger" href="{% url 'delete_inventory' item.pk %}">Delete</a>
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="7" style="text-align: center">No inventory available.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}